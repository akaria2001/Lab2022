<!DOCTYPE html>
<html>

<head>
    <title>QEMU VM and LXC System Container Lab by Amit Karia</title>
    <link rel="stylesheet" href="/static/styles.css" />
</head>

<div id="header">
    <h2>QEMU VM and LXC Container LAB by Amit Karia</h2>
</div>
<div id="header2">
    <h3>Work in progress and at very early stage</h3>
</div>


<script>
    <!--
    function timedRefresh(timeoutPeriod) {
        setTimeout("location.reload(true);",timeoutPeriod);
    }

    window.onload = timedRefresh(2500);

    //   -->
</script>

<body>
    <ul>
        <table = class="table">
            <th>Host System Information</th>
            <tr class="table_row">
            {% for key in system_info %}
            <td> {{ key }} </td>
            {% endfor %}
            </tr>
            <tr class="table_row">
            {% if system_info['system temp (c)'] > 60 %}
            <tr class="table_row">
            <td class=".td_alert" bgcolor="red" > System is in alert as temp exceeds threshold </td>
            </tr>
            {% endif %}
            {% if system_info['system temp (c)'] > 50 and system_info['system temp (c)'] <= 60 %}
            <tr class="table_row">
            <td class=".td_alert" bgcolor="darkorange" style="color:black"> System is in warning as temp exceeds threshold </td>
            </tr>
            {% endif %}
            {% for key in system_info %}
            <td> {{ system_info[key] }} </td>
            {% endfor %}
            </tr>
        </table>
        <table class="table">
        <tr>
        <td class="row_summary">Total Instance Qty : {{ instance_qty }}</td>
        <td class="row_summary">LXC Container Qty : {{ lxc_instance_qty }}</td>
        <td class="row_summary">QEMU VM Qty : {{ vm_instance_qty }}</td>
        <td class="row_summary">Running Instance Qty : {{  running_instance_qty }}</td>
        <td class="row_summary">Stopped Instance Qty : {{  stopped_instance_qty }}</td>
        </tr>
        </table>
        <table class="table">
        <th>Name</th>
        <th>CPU Cores</th>
        <th>System RAM</th>
        <th>Date Created</th>
        <th>CPU usage</th>
        <th>RAM Usage</th>
        <th>Status</th>
        <th>Type</th>
        <th>OS</th>
        {% for instance in instances %}
        <tr class="table_row">
        <td> {{ instance['name'] }} </td>
        <td> {{ instance['config']['limits.cpu'] }} </td>
        <td> {{ instance['config']['limits.memory'] }} </td>
        <td> {{ instance['created_at'] }} </td>
        <td> {{ instance['state']['cpu']['usage'] }} </td>
        <td> {{ instance['state']['memory']['usage'] }} </td>
        <td> {{ instance['state']['status'] }} </td>
        <td> {{ instance['type'] }} </td>
        <td> {{ instance['config']['image.os'] }} </td>
        </tr>
        {% endfor %}
        </tr>
        </table>
    </ul>
</body>
</html>
